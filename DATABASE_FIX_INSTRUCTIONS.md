# 🔧 **הוראות תיקון בעיית טעינת הקבלנים**

## 🚨 **הבעיה שזוהתה:**
שגיאה בטעינת הקבלנים - כנראה בעיה בחיבור למסד נתונים או בנתונים.

---

## 🛠️ **פתרונות מהירים:**

### **פתרון 1: שימוש בכלי התיקון האוטומטי**
1. **פתח בדפדפן:** `setup/database_check_and_fix.php`
2. **הזן פרטי מסד נתונים** (קבל מהאחסון שלך)
3. **לחץ על "תקן את כל הבעיות"**
4. **בדוק שה-API עובד**

### **פתרון 2: עדכון ידני של הקונפיגורציה**
1. **ערוך את הקובץ:** `includes/config.php`
2. **עדכן את השורות הבאות:**
```php
'db_host' => 'localhost', // או כתובת השרת שלך
'db_name' => 'שם_מסד_הנתונים_שלך',
'db_username' => 'שם_המשתמש_שלך',
'db_password' => 'הסיסמה_שלך',
```

### **פתרון 3: הרצת סקריפט מילוי נתונים**
1. **פתח בדפדפן:** `setup/populate_contractors.php`
2. **הרץ את הסקריפט** למילוי נתונים לדוגמה

---

## 📋 **בדיקות שצריך לעשות:**

### **1. בדיקת חיבור למסד נתונים:**
```
פתח: setup/database_check_and_fix.php
לחץ: "בדוק חיבור למסד נתונים"
```

### **2. בדיקת טבלאות:**
```
פתח: setup/database_check_and_fix.php
לחץ: "בדוק טבלאות"
```

### **3. בדיקת API:**
```
פתח בדפדפן: api/contractors.php?debug=1&limit=5
צריך להחזיר: JSON עם רשימת קבלנים
```

### **4. בדיקת דף הקבלנים:**
```
פתח: contractors_page.html
צריך לטעון: רשימת קבלנים עם סינון
```

---

## 🔍 **שגיאות נפוצות ופתרונות:**

### **שגיאה: "Database connection failed"**
**פתרון:**
- בדוק פרטי חיבור ב-`includes/config.php`
- וודא שמסד הנתונים קיים
- בדוק שהמשתמש יש לו הרשאות

### **שגיאה: "Table doesn't exist"**
**פתרון:**
- הרץ: `setup/database_check_and_fix.php`
- לחץ: "צור טבלאות"

### **שגיאה: "No contractors found"**
**פתרון:**
- הרץ: `setup/populate_contractors.php`
- או לחץ: "מלא נתונים לדוגמה"

### **שגיאה: "API returns empty"**
**פתרון:**
- בדוק שהטבלה `contractors` קיימת
- בדוק שיש נתונים בטבלה
- בדוק שה-API path נכון

---

## 📞 **פרטי מסד נתונים נדרשים מהאחסון:**

צור קשר עם ספק האחסון שלך וקבל:
- **שם השרת (Host):** בדרך כלל `localhost`
- **שם מסד הנתונים:** לדוגמה `poolisrael_db`
- **שם משתמש:** לדוגמה `poolisrael_user`
- **סיסמה:** הסיסמה שהגדרת

---

## 🚀 **צעדים לתיקון מהיר:**

### **שלב 1:**
```
1. פתח: setup/database_check_and_fix.php
2. הזן פרטי מסד נתונים
3. לחץ: "שמור הגדרות"
```

### **שלב 2:**
```
1. לחץ: "בדוק חיבור למסד נתונים"
2. אם יש שגיאה - תקן את הפרטים
```

### **שלב 3:**
```
1. לחץ: "צור טבלאות"
2. לחץ: "מלא נתונים לדוגמה"
```

### **שלב 4:**
```
1. לחץ: "בדוק API"
2. פתח: contractors_page.html
3. וודא שהקבלנים נטענים
```

---

## ✅ **אחרי התיקון:**

### **בדוק שהכל עובד:**
1. **דף הקבלנים** - `contractors_page.html`
2. **API הקבלנים** - `api/contractors.php`
3. **סינון וחיפוש** - בדף הקבלנים
4. **כלי הבדיקה** - `test_contractors.html`

### **אם עדיין יש בעיות:**
1. **פתח:** `test_site_integrity.html`
2. **הרץ:** "בדיקות קריטיות בלבד"
3. **בדוק:** את כל השגיאות

---

## 📧 **אם צריך עזרה נוספת:**

**שלח לנו:**
- צילום מסך של השגיאה
- פרטי השרת (ללא סיסמאות!)
- תוצאות כלי הבדיקה

**נענה מיד ונתקן את הבעיה!**

---

**🎯 המטרה: לגרום לדף הקבלנים לעבוד מושלם עם כל הסינונים והחיפוש!**
